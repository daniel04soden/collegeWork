# EE First

[\[\[<https://img.shields.io/npm/v/ee-first.svg?style=flat-square>](https://npmjs.org/package/ee-first)\]\]
[\[\[<https://img.shields.io/travis/jonathanong/ee-first.svg?style=flat-square>](https://travis-ci.org/jonathanong/ee-first)\]\]
[\[\[<https://img.shields.io/coveralls/jonathanong/ee-first.svg?style=flat-square>](https://coveralls.io/r/jonathanong/ee-first?branch=master)\]\]
[\[\[<http://img.shields.io/npm/l/ee-first.svg?style=flat-square>](LICENSE.md)\]\]
[\[\[<http://img.shields.io/npm/dm/ee-first.svg?style=flat-square>](https://npmjs.org/package/ee-first)\]\]
[\[\[<https://img.shields.io/gittip/jonathanong.svg?style=flat-square>](https://www.gittip.com/jonathanong/)\]\]

Get the first event in a set of event emitters and event pairs, then
clean up after itself.

## Install

``` {.bash org-language="sh"}
$ npm install ee-first
```

## API

``` {.javascript org-language="js"}
var first = require('ee-first')
```

### first(arr, listener)

Invoke `listener`{.verbatim} on the first event from the list specified
in `arr`{.verbatim}. `arr`{.verbatim} is an array of arrays, with each
array in the format `[ee, ...event]`{.verbatim}. `listener`{.verbatim}
will be called only once, the first time any of the given events are
emitted. If `error`{.verbatim} is one of the listened events, then if
that fires first, the `listener`{.verbatim} will be given the
`err`{.verbatim} argument.

The `listener`{.verbatim} is invoked as
`listener(err, ee, event, args)`{.verbatim}, where `err`{.verbatim} is
the first argument emitted from an `error`{.verbatim} event, if
applicable; `ee`{.verbatim} is the event emitter that fired;
`event`{.verbatim} is the string event name that fired; and
`args`{.verbatim} is an array of the arguments that were emitted on the
event.

``` {.javascript org-language="js"}
var ee1 = new EventEmitter()
var ee2 = new EventEmitter()

first([
  [ee1, 'close', 'end', 'error'],
  [ee2, 'error']
], function (err, ee, event, args) {
  // listener invoked
})
```

1.  .cancel()

    The group of listeners can be cancelled before being invoked and
    have all the event listeners removed from the underlying event
    emitters.

    ``` {.javascript org-language="js"}
    var thunk = first([
      [ee1, 'close', 'end', 'error'],
      [ee2, 'error']
    ], function (err, ee, event, args) {
      // listener invoked
    })

    // cancel and clean up
    thunk.cancel()
    ```
