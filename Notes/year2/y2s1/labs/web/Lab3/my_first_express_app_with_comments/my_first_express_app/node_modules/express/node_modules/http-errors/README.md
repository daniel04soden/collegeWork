# http-errors

[\[\[<https://badgen.net/npm/v/http-errors>](https://npmjs.org/package/http-errors)\]\]
[\[\[<https://badgen.net/npm/dm/http-errors>](https://nodejs.org/en/download)\]\]
[\[\[<https://badgen.net/npm/node/http-errors>](https://nodejs.org/en/download)\]\]
[\[\[<https://badgen.net/github/checks/jshttp/http-errors/master?label=ci>](https://github.com/jshttp/http-errors/actions?query=workflow%3Aci)\]\]
[\[\[<https://badgen.net/coveralls/c/github/jshttp/http-errors/master>](https://coveralls.io/r/jshttp/http-errors?branch=master)\]\]

Create HTTP errors for Express, Koa, Connect, etc. with ease.

## Install

This is a [Node.js](https://nodejs.org/en/) module available through the
[npm registry](https://www.npmjs.com/). Installation is done using the
[`npm install`{.verbatim}
command](https://docs.npmjs.com/getting-started/installing-npm-packages-locally):

``` console
$ npm install http-errors
```

## Example

``` {.javascript org-language="js"}
var createError = require('http-errors')
var express = require('express')
var app = express()

app.use(function (req, res, next) {
  if (!req.user) return next(createError(401, 'Please login to view this page.'))
  next()
})
```

## API

This is the current API, currently extracted from Koa and subject to
change.

### Error Properties

- `expose`{.verbatim} - can be used to signal if `message`{.verbatim}
  should be sent to the client, defaulting to `false`{.verbatim} when
  `status`{.verbatim} \>= 500
- `headers`{.verbatim} - can be an object of header names to values to
  be sent to the client, defaulting to `undefined`{.verbatim}. When
  defined, the key names should all be lower-cased
- `message`{.verbatim} - the traditional error message, which should be
  kept short and all single line
- `status`{.verbatim} - the status code of the error, mirroring
  `statusCode`{.verbatim} for general compatibility
- `statusCode`{.verbatim} - the status code of the error, defaulting to
  `500`{.verbatim}

### createError(\[status\], \[message\], \[properties\])

Create a new error object with the given message `msg`{.verbatim}. The
error object inherits from `createError.HttpError`{.verbatim}.

``` {.javascript org-language="js"}
var err = createError(404, 'This video does not exist!')
```

- `status: 500`{.verbatim} - the status code as a number
- `message`{.verbatim} - the message of the error, defaulting to node\'s
  text for that status code.
- `properties`{.verbatim} - custom properties to attach to the object

### createError(\[status\], \[error\], \[properties\])

Extend the given `error`{.verbatim} object with
`createError.HttpError`{.verbatim} properties. This will not alter the
inheritance of the given `error`{.verbatim} object, and the modified
`error`{.verbatim} object is the return value.

<!-- eslint-disable no-redeclare -->

``` {.javascript org-language="js"}
fs.readFile('foo.txt', function (err, buf) {
  if (err) {
    if (err.code === 'ENOENT') {
      var httpError = createError(404, err, { expose: false })
    } else {
      var httpError = createError(500, err)
    }
  }
})
```

- `status`{.verbatim} - the status code as a number
- `error`{.verbatim} - the error object to extend
- `properties`{.verbatim} - custom properties to attach to the object

### createError.isHttpError(val)

Determine if the provided `val`{.verbatim} is an `HttpError`{.verbatim}.
This will return `true`{.verbatim} if the error inherits from the
`HttpError`{.verbatim} constructor of this module or matches the \"duck
type\" for an error this module creates. All outputs from the
`createError`{.verbatim} factory will return `true`{.verbatim} for this
function, including if an non-`HttpError`{.verbatim} was passed into the
factory.

### new createError\[code \|\| name\](\[msg\]))

Create a new error object with the given message `msg`{.verbatim}. The
error object inherits from `createError.HttpError`{.verbatim}.

``` {.javascript org-language="js"}
var err = new createError.NotFound()
```

- `code`{.verbatim} - the status code as a number
- `name`{.verbatim} - the name of the error as a \"bumpy case\",
  i.e.Â =NotFound= or `InternalServerError`{.verbatim}.

1.  List of all constructors

      Status Code   Constructor Name
      ------------- -------------------------------
      400           BadRequest
      401           Unauthorized
      402           PaymentRequired
      403           Forbidden
      404           NotFound
      405           MethodNotAllowed
      406           NotAcceptable
      407           ProxyAuthenticationRequired
      408           RequestTimeout
      409           Conflict
      410           Gone
      411           LengthRequired
      412           PreconditionFailed
      413           PayloadTooLarge
      414           URITooLong
      415           UnsupportedMediaType
      416           RangeNotSatisfiable
      417           ExpectationFailed
      418           ImATeapot
      421           MisdirectedRequest
      422           UnprocessableEntity
      423           Locked
      424           FailedDependency
      425           TooEarly
      426           UpgradeRequired
      428           PreconditionRequired
      429           TooManyRequests
      431           RequestHeaderFieldsTooLarge
      451           UnavailableForLegalReasons
      500           InternalServerError
      501           NotImplemented
      502           BadGateway
      503           ServiceUnavailable
      504           GatewayTimeout
      505           HTTPVersionNotSupported
      506           VariantAlsoNegotiates
      507           InsufficientStorage
      508           LoopDetected
      509           BandwidthLimitExceeded
      510           NotExtended
      511           NetworkAuthenticationRequired

## License

[MIT](LICENSE)
